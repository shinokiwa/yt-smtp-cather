<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Testing SMTP Server</title>

    <link rel="stylesheet" type="text/css" href="/static/css/style.css">
</head>
<body>
    {% include 'navi.html' %}

    <h2>受信メール一覧</h2>
    <button type="button" onclick="location.href='/delete_all'">全件削除</button>
    <table>
        <tr>
            <th>ID</th>
            <th>送信元</th>
            <th>宛先</th>
            <th>件名</th>
            <th>受信日時</th>
        </tr>
        {% for item in mails %}
        <tr>
            <td
                class="mail-id"
                data-id="{{ item['id'] }}"
            >
                {{ item['id'] }}
            </td>
            <td
                class="mail-sender"
                data-id="{{ item['id'] }}"
                data-sender="{{ item['sender'] }}"
            >
                {{ item['sender'] }}
            </td>
            <td
                class="mail-recipient"
                data-id="{{ item['id'] }}"
                data-recipient="{{ item['recipient'] }}"
            >
                {{ item['recipient'] }}
            </td>
            <td
                class="mail-subject"
                data-id="{{ item['id'] }}"
                data-subject="{{ item['subject'] }}"
            >
                <a href="/detail/{{item['id']}}">{{ item['subject'] | default('(no title)', true) }}</a>
            </td>
            <td
                class="mail-updated"
                data-id="{{ item['id'] }}"
                data-updated="{{ item['updated_at'] }}"
            >
                {{ item['updated_at'] }}
            </td>
        </tr>
        {% endfor %}
    </table>
</body>
</html>